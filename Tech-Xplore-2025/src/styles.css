@import "tailwindcss";

:root {
  --card-bg: rgba(255, 255, 255, 0.1);
  --card-border: rgba(255, 255, 255, 0.2);
  --glow-color: rgba(139, 92, 246, 0.5);
  --text-glow: 0 0 8px rgba(255, 255, 255, 0.3);
}

.dark {
  --card-bg: rgba(17, 24, 39, 0.7);
  --card-border: rgba(255, 255, 255, 0.1);
  --glow-color: rgba(167, 139, 250, 0.6);
}

/* Markdown Table Styling (Tailwind @apply) */
.markdown-body table {
  @apply w-full border-collapse my-4 text-[0.95em];
}
.markdown-body th,
.markdown-body td {
  @apply border border-neutral-300 dark:border-neutral-700 px-3 py-2 text-left;
}
.markdown-body th {
  @apply bg-neutral-100 dark:bg-neutral-800 font-semibold dark:text-neutral-200;
}
.markdown-body tr {
  @apply dark:text-neutral-300;
}
.markdown-body tr:nth-child(even) {
  @apply bg-neutral-50 dark:bg-neutral-850;
}

/* Custom variants */
@custom-variant dark (&:where(.dark, .dark *));
@custom-variant interactive (&:where(.interactive, .interactive *));
@custom-variant toggle (&:where(.toggle, .toggle *));
@custom-variant square (&:where(.square, .square *));
@custom-variant circular (&:where(.circular, .circular *));

/* Tailwind config */
@theme {
  --text-xs: 10px;
  --text-xs--line-height: calc(1 / 0.5);
  --text-sm: 12px;
  --text-sm--line-height: calc(1 / 0.75);
  --text-base: 14px;
  --text-base--line-height: calc(1.25 / 0.875);
  --ease-bounce: cubic-bezier(0.2, 0, 0, 1.5);
  --default-transition-duration: 100ms;
  --animate-refresh: refresh 0.5s ease-in-out infinite;
  --color-black: #000;
  --color-white: #fff;
  --color-neutral-50: oklch(0.985 0 0);
  --color-neutral-100: oklch(0.97 0 0);
  --color-neutral-150: oklch(0.96 0 0);
  --color-neutral-200: oklch(0.922 0 0);
  --color-neutral-250: oklch(0.9 0 0);
  --color-neutral-300: oklch(0.87 0 0);
  --color-neutral-400: oklch(0.708 0 0);
  --color-neutral-450: oklch(0.62 0 0);
  --color-neutral-500: oklch(0.556 0 0);
  --color-neutral-600: oklch(0.439 0 0);
  --color-neutral-700: oklch(0.371 0 0);
  --color-neutral-750: oklch(0.31 0 0);
  --color-neutral-800: oklch(0.269 0 0);
  --color-neutral-850: oklch(0.23 0 0);
  --color-neutral-900: oklch(0.205 0 0);
  --color-neutral-925: oklch(0.175 0 0);
  --color-neutral-950: oklch(0.145 0 0);
  --color-red-650: oklch(0.55 0.238 27.4);
  --color-red-750: oklch(0.46 0.195 27.2);
  --color-blue-400: oklch(0.707 0.165 254.624);
  --color-blue-800: oklch(0.424 0.199 265.638);
  --color-ob-base-100: var(--color-white);
  --color-ob-base-200: var(--color-neutral-50);
  --color-ob-base-300: var(--color-neutral-100);
  --color-ob-base-400: var(--color-neutral-200);
  --color-ob-base-500: var(--color-neutral-300);
  --color-ob-base-1000: var(--color-neutral-900);
  --color-ob-border: var(--color-neutral-200);
  --color-ob-border-active: var(--color-neutral-400);
  --text-color-ob-base-100: var(--color-neutral-500);
  --text-color-ob-base-200: var(--color-neutral-600);
  --text-color-ob-base-300: var(--color-neutral-900);
  --text-color-ob-destructive: var(--color-red-600);
  --text-color-ob-inverted: var(--color-white);
  --color-ob-btn-primary-bg: var(--color-neutral-750);
  --color-ob-btn-primary-bg-hover: var(--color-neutral-850);
  --color-ob-btn-primary-border: var(--color-neutral-500);
  --color-ob-btn-primary-border-hover: var(--color-neutral-600);
  --color-ob-btn-secondary-bg: var(--color-white);
  --color-ob-btn-secondary-bg-hover: var(--color-neutral-50);
  --color-ob-btn-secondary-border: var(--color-neutral-200);
  --color-ob-btn-secondary-border-hover: var(--color-neutral-300);
  --color-ob-btn-ghost-bg-hover: var(--color-neutral-150);
  --color-ob-btn-destructive-bg: var(--color-red-600);
  --color-ob-btn-destructive-bg-hover: var(--color-red-650);
  --color-ob-btn-destructive-border: var(--color-red-400);
  --color-ob-btn-destructive-border-hover: var(--color-red-500);
  --color-ob-focus: var(--color-blue-400);
}

.dark {
  --color-ob-base-100: var(--color-neutral-950);
  --color-ob-base-200: var(--color-neutral-900);
  --color-ob-base-300: var(--color-neutral-850);
  --color-ob-base-400: var(--color-neutral-800);
  --color-ob-base-500: var(--color-neutral-750);
  --color-ob-base-1000: var(--color-neutral-50);
  --color-ob-border: var(--color-neutral-800);
  --color-ob-border-active: var(--color-neutral-700);
  --text-color-ob-base-100: var(--color-neutral-500);
  --text-color-ob-base-200: var(--color-neutral-400);
  --text-color-ob-base-300: var(--color-neutral-50);
  --text-color-ob-destructive: var(--color-red-400);
  --text-color-ob-inverted: var(--color-neutral-900);
  --color-ob-btn-primary-bg: var(--color-neutral-300);
  --color-ob-btn-primary-bg-hover: var(--color-neutral-250);
  --color-ob-btn-primary-border: var(--color-neutral-100);
  --color-ob-btn-primary-border-hover: var(--color-white);
  --color-ob-btn-secondary-bg: var(--color-neutral-900);
  --color-ob-btn-secondary-bg-hover: var(--color-neutral-850);
  --color-ob-btn-secondary-border: var(--color-neutral-800);
  --color-ob-btn-secondary-border-hover: var(--color-neutral-750);
  --color-ob-btn-ghost-bg-hover: var(--color-neutral-850);
  --color-ob-btn-destructive-bg: var(--color-red-800);
  --color-ob-btn-destructive-bg-hover: var(--color-red-750);
  --color-ob-btn-destructive-border: var(--color-red-700);
  --color-ob-btn-destructive-border-hover: var(--color-red-600);
  --color-ob-focus: var(--color-blue-800);
}

/* Scope styles to the Chat component container */
.chat-container {
  background-image: url('https://images.pexels.com/photos/70376/animals-zebra-zebra-crossing-stripes-70376.jpeg?cs=srgb&dl=pexels-pixabay-70376.jpg&fm=jpg');
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  overflow-y: auto;
  min-height: 100vh;
  position: relative;
}

.chat-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(236, 72, 153, 0.2), rgba(245, 158, 11, 0.2));
  animation: gradientShift 15s ease infinite;
  z-index: 0;
  opacity: 0.3;
}

@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Landing and Title Sections */
.landing-section {
  background: transparent;
  z-index: 1;
}

.title-section {
  background: transparent;
  z-index: 1;
}

.title {
  background-size: 200% auto;
}

.chatbot-section {
  background: transparent;
  z-index: 1;
}

/* Chatbot Styles */
.chat-container .max-w-lg {
  background: var(--card-bg);
  backdrop-filter: blur(12px);
  border: 1px solid var(--card-border);
  border-radius: 0.75rem;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3), 0 0 20px var(--glow-color);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  max-width: 32rem;
  height: calc(100vh - 2rem);
}

.chat-container .max-w-lg:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4), 0 0 30px var(--glow-color);
}

.chat-container .border-b {
  background: var(--card-bg);
  backdrop-filter: blur(8px);
  border-bottom: 1px solid var(--card-border);
  padding: 0.75rem;
}

.chat-container .font-semibold.text-base {
  font-size: 1rem;
  font-weight: 700;
  background: linear-gradient(90deg, #EC4899, #F59E0B);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: var(--text-glow);
}

.chat-container .border-neutral-300.dark\:border-neutral-800 {
  border-color: var(--card-border);
}

.chat-container .bg-neutral-100.dark\:bg-neutral-900 {
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: 0.75rem;
  padding: 0.75rem;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.chat-container .bg-neutral-100.dark\:bg-neutral-900:hover {
  transform: scale(1.02);
  box-shadow: 0 0 15px var(--glow-color);
}

.chat-container .bg-neutral-100.dark\:bg-neutral-900::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: 0.5s;
}

.chat-container .bg-neutral-100.dark\:bg-neutral-900:hover::before {
  left: 100%;
}

.chat-container .rounded-bl-none.border-assistant-border {
  border-left: 3px solid #8B5CF6;
}

.chat-container .rounded-br-none {
  border-right: 3px solid #EC4899;
}

.chat-container .text-muted-foreground {
  color: #D1D5DB;
  opacity: 0.8;
  transition: opacity 0.3s ease;
}

.chat-container .text-muted-foreground:hover {
  opacity: 1;
}

.chat-container .bg-primary {
  background: linear-gradient(135deg, #8B5CF6, #EC4899, #F59E0B);
  border: none;
  transition: all 0.3s ease;
}

.chat-container .bg-primary:hover {
  transform: scale(1.1);
  box-shadow: 0 0 10px var(--glow-color);
}

.chat-container .text-primary-foreground {
  color: #FFFFFF;
  font-weight: 600;
}

.chat-container .border-neutral-200.dark\:border-neutral-800 {
  border-color: var(--card-border);
}

.chat-container .absolute.bottom-0 {
  background: var(--card-bg);
  backdrop-filter: blur(8px);
  border-top: 1px solid var(--card-border);
  padding: 0.75rem;
  box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.2);
}

.chat-container .textarea {
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: 1rem;
  padding: 0.75rem;
  color: #E5E7EB;
  transition: all 0.3s ease;
  box-shadow: inset 0 0 5px var(--glow-color);
  min-height: 24px;
  max-height: calc(75dvh);
}

.chat-container .textarea:focus {
  box-shadow: 0 0 10px var(--glow-color), inset 0 0 5px var(--glow-color);
  border-color: #8B5CF6;
}

.chat-container .textarea::placeholder {
  color: #9CA3AF;
  opacity: 0.7;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

.chat-container button[aria-label="Send message"],
.chat-container button[aria-label="Stop generation"] {
  animation: pulse 2s infinite;
}

.chat-container .overflow-y-auto {
  scrollbar-width: thin;
  scrollbar-color: #8B5CF6 #E5E7EB;
  max-height: calc(100vh - 10rem);
}

.chat-container .overflow-y-auto::-webkit-scrollbar {
  width: 8px;
}

.chat-container .overflow-y-auto::-webkit-scrollbar-track {
  background: #E5E7EB;
  border-radius: 4px;
}

.chat-container .overflow-y-auto::-webkit-scrollbar-thumb {
  background: #8B5CF6;
  border-radius: 4px;
}

.chat-container .overflow-y-auto::-webkit-scrollbar-thumb:hover {
  background: #EC4899;
}

/* Ensure the wrapper in index.tsx doesn't override chat styles */
.bg-neutral-50.text-base.text-neutral-900,
.dark:bg-neutral-950.dark:text-neutral-100 {
  background: transparent !important;
}

.btn {
  &.btn-primary {
    @apply border-ob-btn-primary-border bg-ob-btn-primary-bg text-ob-inverted shadow-xs;
    @variant interactive {
      @apply not-disabled:hover:border-ob-btn-primary-border-hover not-disabled:hover:bg-ob-btn-primary-bg-hover;
      @variant toggle {
        @apply not-disabled:border-ob-btn-primary-border-hover not-disabled:bg-ob-btn-primary-bg-hover;
      }
    }
  }
  &.btn-secondary {
    @apply border-ob-btn-secondary-border bg-ob-btn-secondary-bg text-ob-base-300 shadow-xs;
    @variant interactive {
      @apply not-disabled:hover:border-ob-btn-secondary-border-hover not-disabled:hover:bg-ob-btn-secondary-bg-hover;
      @variant toggle {
        @apply not-disabled:border-ob-btn-secondary-border-hover not-disabled:bg-ob-btn-secondary-bg-hover;
      }
    }
  }
  &.btn-ghost {
    @apply text-ob-base-300 border-transparent bg-transparent;
    @variant interactive {
      @apply not-disabled:hover:bg-ob-btn-ghost-bg-hover;
      @variant toggle {
        @apply not-disabled:bg-ob-btn-ghost-bg-hover;
      }
    }
  }
  &.btn-destructive {
    @apply border-ob-btn-destructive-border bg-ob-btn-destructive-bg text-white;
    @variant interactive {
      @apply not-disabled:hover:bg-ob-btn-destructive-bg-hover not-disabled:hover:border-ob-btn-destructive-border-hover;
      @variant toggle {
        @apply not-disabled:bg-ob-btn-destructive-bg-hover not-disabled:border-ob-btn-destructive-border-hover;
      }
    }
  }
  @apply border;
  @variant interactive {
    @apply cursor-pointer transition-colors;
  }
}

.add-focus {
  @apply focus-visible:ring-ob-focus outline-none focus:opacity-100 focus-visible:ring-1 *:in-focus:opacity-100;
}

.add-disable {
  @apply disabled:text-ob-base-100 disabled:cursor-not-allowed;
}

.add-size-sm {
  @apply h-6.5 rounded px-2 text-sm;
  @variant square {
    @apply flex size-6.5 items-center justify-center px-0;
  }
  @variant circular {
    @apply flex size-6.5 items-center justify-center rounded-full px-0;
  }
}

.add-size-md {
  @apply h-8 rounded-md px-2.5 text-base;
  @variant square {
    @apply flex size-8 items-center justify-center px-0;
  }
  @variant circular {
    @apply flex size-8 items-center justify-center rounded-full px-0;
  }
}

.add-size-base {
  @apply h-9 rounded-md px-3 text-base;
  @variant square {
    @apply flex size-9 items-center justify-center px-0;
  }
  @variant circular {
    @apply flex size-9 items-center justify-center rounded-full px-0;
  }
}

.db-card {
  animation: db-card-animation 3s linear infinite;
  animation-play-state: paused;
  stroke-dasharray: 100;
  &:is(:where(.group):hover *) {
    @media (hover: hover) {
      animation-play-state: running;
    }
  }
}

@keyframes db-card-animation {
  0% { stroke-dashoffset: -200; }
  50% { stroke-dashoffset: 0; }
  100% { stroke-dashoffset: 200; }
}

.pixelate {
  filter: url(#pixelate);
}

.ripple {
  filter: url(#ripple);
}

.float {
  animation: float 5s linear infinite alternate;
}

@keyframes float {
  to { transform: translate(5px, 15px); }
}

@keyframes refresh {
  to { transform: rotate(360deg) scale(0.9); }
}